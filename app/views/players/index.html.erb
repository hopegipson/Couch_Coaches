<h1>NFL Players</h1>
<p>You can only add players that are free agents. You may only release players that are on one of your user teams.</p>

<p class="text-danger"><%= @error %></p>

<h3>Filter players:</h3>
<%= form_tag("/players", method: "get") do %>
  <%= select_tag "team", options_from_collection_for_select(@teams, "id", "name"), include_blank: true %>
  <%= submit_tag "Filter" %>
<% end %>
<table class="table table-hover">

  <thead>
  <tbody>
    <tr class="table-active">
      <th scope="row">Name</th>
      <td>Position</td>
      <td>NFL TEAM</td>
      <td>Projected Season Points</td>
      <td>Fantasy Team</td>
      <td>Add/Release <td>


      </tbody>


    </tr>
    <% @players.each do |player| %>

    <tr>

      <th scope="col"><%= link_to "#{player.name}", player_path(player)  %></th>
      <th scope="col"><%= player.position %></th>
      <th scope="col"><%= player.nfl_team %></th>
      <th scope="col"><%= player.projected_points %> Points</th>
      <% if player.team.name == "Free Agent" %>
      <th scope="col"><%=  "#{player.team.name}" %> </th>
      <th scope="col"><%= link_to "Add Player", edit_player_path(player)  %> </th>
      <% else %>
      <th scope="col"><%= link_to "#{player.team.name}", team_path(player.team)  %> </th>
      <% end %>

      <% if admin? == false && @current_user.teams.include?(player.team)  %>
      <th scope="col"><%= link_to "Release Player",  release_path(player)  %> </th>
      <% end %>


      <% end %>



    </tr>

  </thead>
 
</table> 